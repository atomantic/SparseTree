# Release v0.2.x - Multi-Platform Linking & Tree Views

Released: YYYY-MM-DD

## Overview

Major enhancements to the ancestry tree visualization with four view modes and lazy loading for deep ancestry. Added multi-platform genealogy linking with Ancestry.com and WikiTree integration.

## üéâ New Features

### Multiple Tree View Modes
- **Focus Navigator**: Navigate one person at a time with breadcrumb trail
- **Pedigree Chart**: Classic vertical tree with expandable generations
- **Generational Columns**: Horizontal columns organized by generation
- **Classic**: Original SVG-based tree with zoom/pan

### Lazy Loading for Deep Ancestry
- Initial load of 10 generations for columns view
- "Load 5 more" button appears when more ancestors are available
- Successfully tested loading 21 generations with 17,000+ ancestors

### View Mode URL Persistence
- Tree view mode saved in URL query params (`?view=columns`)

### Ancestry.com Linking
- Link persons to their Ancestry.com profiles with automatic photo extraction
- Browser-based scraping with auto-login support using saved credentials
- Srcset parsing to extract highest resolution photos (5x = maxside=1800)
- Auto-launches/connects browser when needed

### WikiTree Linking
- Link persons to their WikiTree profiles with photo extraction
- HTTP-based scraping (no auth required for public profiles)
- Extracts profile photo and description

### Manual Photo Selection
- "Use Photo" button for each linked platform
- Separated linking from photo fetching for user control
- Support for FamilySearch, Wikipedia, Ancestry, and WikiTree photos
- Photos stored locally with platform-specific naming (`{personId}-ancestry.jpg`, etc.)

### Unified Platforms UI
- Consolidated all platform links into single "Platforms" section in PersonDetail
- FamilySearch, Wikipedia, Ancestry, WikiTree all shown together
- Link and "Use Photo" buttons for each platform

## üîß Improvements

### Tree Visualization
- **Simplified Generation Labels**: Gen 3+ shows "1st/2nd/3rd Great-Grandparents" instead of verbose labels
- **Columns View Optimization**: Only displays known ancestors (hides unknown placeholders)
- **Header Styling**: Fixed transparent header in columns view to prevent text collision when scrolling

### Photo Priority
- Updated sparse tree view to use photos in order:
  1. Ancestry (highest priority)
  2. WikiTree
  3. Wikipedia
  4. FamilySearch scraped (lowest priority)

### Data Model
- Added `photoUrl` field to PlatformReference to store discovered photo URLs before downloading

## üêõ Bug Fixes

- Browser auto-connects when linking Ancestry profiles (no more "Browser not connected" errors)
- Ancestry photo now appears in sparse tree view

## üì¶ Installation

```bash
git clone https://github.com/atomantic/SparseTree.git
cd SparseTree
npm run install:all
pm2 start ecosystem.config.cjs
```

## üîó Full Changelog

**Full Diff**: https://github.com/atomantic/SparseTree/compare/v0.1.x...v0.2.x
